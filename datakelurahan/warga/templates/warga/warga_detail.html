<!DOCTYPE html>
<html>

<head>
    <title>Detail Warga</title>

    <!-- CDN Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

    <!-- Tombol Kembali -->
    <div class="container mt-3">
        <a href="{% url 'warga-list' %}" class="text-decoration-none">
            ← Kembali
        </a>
    </div>

    <div class="container mt-4">

        <!-- CARD DETAIL WARGA -->
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">Detail Warga</h4>
            </div>

            <div class="card-body">
                <h4 class="text-primary">{{ object.nama_lengkap }}</h4>

                <p><strong>NIK:</strong> {{ object.nik }}</p>
                <p><strong>Alamat:</strong> {{ object.alamat }}</p>
                <p><strong>No Telepon:</strong> {{ object.no_telepon }}</p>
                <p><strong>Tanggal Registrasi:</strong> {{ object.tanggal_registrasi }}</p>

                <!-- Tombol Edit & Hapus -->
                <div class="mt-3">
                    <a href="{% url 'warga-edit' object.pk %}" class="btn btn-warning btn-sm">Edit Data</a>
                    <a href="{% url 'warga-hapus' object.pk %}" class="btn btn-danger btn-sm">Hapus Data</a>
                </div>
            </div>
        </div>

        <!-- LIST PENGADUAN -->
        <div class="card shadow-sm">
            <div class="card-header bg-secondary text-white">
                <h5 class="mb-0">Daftar Pengaduan oleh {{ object.nama_lengkap }}</h5>
            </div>

            <div class="card-body">

                <ul>
                    {% for aduan in object.pengaduan_set.all %}
                        <li>
                            <strong>{{ aduan.judul }}</strong> — 
                            <em>Status: {{ aduan.get_status_display }}</em><br>
                            <small>{{ aduan.tanggal_lapor|date:"d M Y" }}</small>

                            <p>{{ aduan.deskripsi }}</p>
                        </li>
                    {% empty %}
                        <li><em>Warga ini belum pernah membuat pengaduan.</em></li>
                    {% endfor %}
                </ul>

                <!-- Tombol Tambah Pengaduan -->
                <a href="{% url 'pengaduan_tambah' %}" class="btn btn-primary btn-sm mt-2">
                    + Tambah Pengaduan
                </a>

            </div>
        </div>

    </div>

</body>

</html>
